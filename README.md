<div align="center">

# ⏰ 定时提醒助手

<i>⏳ Time is what we want most, but what we use worst.</i>

![License](https://img.shields.io/badge/license-AGPL--3.0-green?style=flat-square)
![Python](https://img.shields.io/badge/python-3.10+-blue?style=flat-square&logo=python&logoColor=white)
![AstrBot](https://img.shields.io/badge/framework-AstrBot-ff6b6b?style=flat-square)

</div>

## 💡 简介

一款为 [**AstrBot**](https://github.com/AstrBotDevs/AstrBot) 设计的定时提醒插件，支持使用 cron 表达式创建定时任务，支持图文混排、表情、At消息。

---

## 🚀 功能特性

* **🕐 灵活的定时规则**: 支持标准 cron 表达式（5段格式），可设置每天、每周、每月等各种定时规则
* **📝 富媒体消息**: 完美支持文字、图片、表情、艾特(At)等组件
* **🎯 智能目标选择**: 默认发送到当前会话，可通过 `@群号` 指定群聊、`#好友号` 指定私聊
* **📡 多会话启停控制**: 同一提醒/任务可在多个会话中启用，支持按会话单独启动/停止
* **🔧 指令任务模块**: 支持创建定时执行指令的任务，自动传递管理员权限
* **🔗 链接提醒功能**: 可将提醒与指令任务关联，提醒发送后自动执行指定指令

---

## 📖 使用指南

⚠️ **所有管理指令仅限Bot管理员或白名单用户使用**

### 🔔 添加提醒

**格式1（当前会话）**:

```
/添加提醒 <名称> <cron表达式> <消息>
```

**格式2（指定群聊/私聊）**:

```
/添加提醒 <名称> [@<群号>|#<好友号>] <cron表达式> <消息>
```

> 提醒名称不能为纯阿拉伯数字（避免与序号混淆）

**基础示例**:

```
/添加提醒 早安 0 9 * * * 早上好！
```

每天9点在当前会话发送

```
/添加提醒 周报 @123456789 0 18 * * 5 本周工作总结
```

每周五18点在指定群聊发送（远程控制）

**⭐ 多时间点示例** (使用逗号分隔):

```
/添加提醒 喝水 0 9,14,18 * * * 记得喝水！
```

每天9点、14点、18点各发送一次

```
/添加提醒 课间休息 0 10,15,20 * * 1-5 该休息了
```

工作日10点、15点、20点发送

### 🛠️ 添加任务

**格式1（当前会话）**:

```
/添加任务 <名称> <cron表达式> <指令>
```

**格式2（指定群聊/私聊）**:

```
/添加任务 <名称> [@<群号>|#<好友号>] <cron表达式> <指令>
```

> 任务名称不能为纯阿拉伯数字（避免与序号混淆）

**基础示例**:

```
/添加任务 每日签到 0 9 * * * /签到
```

每天9点在当前会话执行签到指令

```
/添加任务 群签到 @123456789 0 9 * * * /签到
```

每天9点在指定群聊执行签到指令

### 🔗 链接提醒

将提醒与指令任务关联，提醒发送后自动执行指定指令：

```
/链接提醒 <提醒名称> <指令>
```

**示例**:

```
/链接提醒 早安 /签到
```

当"早安"提醒执行后，会自动执行"/签到"指令

**说明**:

- 指令需以指令前缀（如/）开头
- 支持为同一个提醒链接多个指令

### 📋 查看提醒

**查看所有提醒列表**:

```
/查看提醒
```

显示所有已创建的提醒任务列表（简略信息）

**查看指定提醒详情（支持序号或名称）**:

```
/查看提醒 <序号或提醒名称>
```

查看指定提醒的完整详细信息，包括：

- 发送目标、定时规则、创建时间等属性
- 完整的提醒内容（所有文字和图片）
- 已链接的任务信息

### 📋 查看任务

**查看所有任务列表**:

```
/查看任务
```

显示所有已创建的任务列表（简略信息）

**查看指定任务详情（支持序号或名称）**:

```
/查看任务 <序号或任务名称>
```

查看指定任务的完整详细信息，包括：

- 执行目标、定时规则、创建时间等属性
- 执行的指令内容

### 🔗 查看链接

**查看所有链接的任务**:

```
/查看链接
```

显示所有已链接的任务关系列表

### ❌ 删除提醒

```
/删除提醒 <序号或提醒名称>
```

删除指定的提醒任务（支持通过 `/查看提醒` 获取序号或直接使用名称）

### 🧹 删除任务

```
/删除任务 <序号或任务名称>
```

删除指定的任务（支持通过 `/查看任务` 获取序号或直接使用名称）

### ✏️ 编辑提醒/任务

仅修改已有提醒/任务的定时规则和内容，不改变启用会话：

```
/编辑提醒 <提醒名称> <cron表达式> <消息内容>
/编辑任务 <任务名称> <cron表达式> <指令>
```


### ⚡ 启动/停止提醒与任务

在不同会话中启用或停止已有的提醒/任务：

```
/启动提醒 <提醒名称> [@群号|#好友号]
/停止提醒 <提醒名称> [@群号|#好友号]
/启动任务 <任务名称> [@群号|#好友号]
/停止任务 <任务名称> [@群号|#好友号]
```

不带会话参数时作用于当前会话；带 `@群号` 时作用于指定群聊，带 `#好友号` 时作用于指定私聊。  

### ✂️ 删除链接

删除指定的链接任务：

```
/删除链接 <提醒序号> <命令序号>
```

**示例**:

```
/删除链接 1 1
```

删除第1个有链接的提醒的第1个链接命令

### ❓ 帮助

```
/提醒帮助
```

查看详细的使用说明

---

## ⚙️ Cron 表达式说明

格式: `分 时 日 月 周`

- **分**: 0-59
- **时**: 0-23
- **日**: 1-31
- **月**: 1-12
- **周**: 0-6 (0=周日)

**特殊符号**:

- **\***: 任意值
- **\*/n**: 每n个单位
- **a,b,c**: 多个具体值（逗号分隔）
- **a-b**: 范围值

**常用示例**:

| Cron 表达式       | 说明                     |
| :---------------- | :----------------------- |
| `0 9 * * *`       | 每天9点                  |
| `0 */2 * * *`     | 每2小时                  |
| `30 18 * * 1-5`   | 工作日18:30              |
| `0 0 1 * *`       | 每月1号0点               |
| `0 9,12,18 * * *` | 每天9点、12点、18点      |
| `30 8-17/2 * * *` | 8:30到17:30之间，每2小时 |

---

## 📝 更新日志

* **v1.1**
  
  * 支持 `#好友号` 指定私聊会话
  * 新增 `编辑提醒`、`编辑任务` 指令
  * 新增 `启动提醒`、`停止提醒`、`启动任务`、`停止任务` 指令
  * 新增 `白名单用户` 配置项

* **v1.0**
  
  * 新增 指令任务 模块
  * 新增 链接提醒 功能
  * 新增 查看/删除链接 命令

* **v0.1**
  
  * 实现 定时提醒 功能
  * 支持 使用 cron 表达式创建定时提醒
  * 支持 图文混排消息，完美保持原始顺序
 
---


## 🙏 致谢

* 指令执行部分参考了 [astrbot_plugin_sy](https://github.com/kjqwer/astrbot_plugin_sy) 的代码实现，在此表示感谢！

---

## ❤️ 支持

* [AstrBot 帮助文档](https://astrbot.app)
* 如果您在使用中遇到问题，欢迎在本仓库提交 [Issue](https://github.com/Foolllll-J/astrbot_plugin_reminder/issues)。

---

<div align="center">

**如果本插件对你有帮助，欢迎点个 ⭐ Star 支持一下！**

</div>
