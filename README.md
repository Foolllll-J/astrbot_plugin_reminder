# ⏰ 定时提醒插件

![License](https://img.shields.io/badge/license-AGPL--3.0-green?style=flat-square)
![Python](https://img.shields.io/badge/python-3.10+-blue?style=flat-square&logo=python&logoColor=white)
![AstrBot](https://img.shields.io/badge/framework-AstrBot-ff6b6b?style=flat-square)

一款为 [AstrBot](https://github.com/AstrBotDevs/AstrBot) 设计的定时提醒插件，支持使用 cron 表达式创建定时任务，自动发送消息或执行指令任务。

---

## ✨ 功能特性

* **🕐 灵活的定时规则**: 支持标准 cron 表达式（5段格式），可设置每天、每周、每月等各种定时规则
* **📝 图文混排消息**: 完美支持文字+图片组合，保持原始顺序
* **🎯 智能目标选择**: 默认发送到当前会话，支持 `@群号` 为其他群聊创建任务
* **🔧 指令任务模块**: 支持创建定时执行指令的任务，如定时签到、定时查询等
* **🔗 链接提醒功能**: 可将提醒与指令任务关联，提醒发送后自动执行指定指令

---

## 📖 使用指南

⚠️ **所有管理指令仅限Bot管理员使用**

### ➕ 添加提醒

**格式1（当前会话）**:

```
/添加提醒 <名称> <cron表达式> <消息>
```

**格式2（指定群聊）**:

```
/添加提醒 <名称> @<群号> <cron表达式> <消息>
```

**基础示例**:

```
/添加提醒 早安 0 9 * * * 早上好！
```

每天9点在当前会话发送

```
/添加提醒 周报 @123456789 0 18 * * 5 本周工作总结
```

每周五18点在指定群聊发送（远程控制）

**⭐ 多时间点示例** (使用逗号分隔):

```
/添加提醒 喝水 0 9,14,18 * * * 记得喝水！
```

每天9点、14点、18点各发送一次

```
/添加提醒 课间休息 0 10,15,20 * * 1-5 该休息了
```

工作日10点、15点、20点发送

### ➕ 添加任务

**格式1（当前会话）**:

```
/添加任务 <名称> <cron表达式> <指令>
```

**格式2（指定群聊）**:

```
/添加任务 <名称> @<群号> <cron表达式> <指令>
```

**基础示例**:

```
/添加任务 每日签到 0 9 * * * /签到
```

每天9点在当前会话执行签到指令

```
/添加任务 群签到 @123456789 0 9 * * * /签到
```

每天9点在指定群聊执行签到指令

### 🔗 链接提醒

将提醒与指令任务关联，提醒发送后自动执行指定指令：

```
/链接提醒 <提醒名称> <指令>
```

**示例**:

```
/链接提醒 早安 /签到
```

当"早安"提醒执行后，会自动执行"/签到"指令

**说明**:

- 指令必须以/开头
- 支持为同一个提醒链接多个指令

### 📋 查看提醒

**查看所有提醒列表**:

```
/查看提醒
```

显示所有已创建的提醒任务列表（简略信息）

**查看指定提醒详情**:

```
/查看提醒 <提醒名称>
```

查看指定提醒的完整详细信息，包括：

- 发送目标、定时规则、创建时间等属性
- 完整的提醒内容（所有文字和图片）
- 已链接的任务信息

### 📋 查看任务

**查看所有任务列表**:

```
/查看任务
```

显示所有已创建的任务列表（简略信息）

**查看指定任务详情**:

```
/查看任务 <任务名称>
```

查看指定任务的完整详细信息，包括：

- 执行目标、定时规则、创建时间等属性
- 执行的指令内容

### 📋 查看链接

**查看所有链接的任务**:

```
/查看链接
```

显示所有已链接的任务关系列表

### 🗑️ 删除提醒

```
/删除提醒 <序号>
```

删除指定序号的提醒任务（序号可通过 `/查看提醒` 获取）

### 🗑️ 删除任务

```
/删除任务 <序号>
```

删除指定序号的任务（序号可通过 `/查看任务` 获取）

### 🗑️ 删除链接

删除指定的链接任务：

```
/删除链接 <提醒序号> <命令序号>
```

**示例**:

```
/删除链接 1 1
```

删除第1个有链接的提醒的第1个链接命令

### ❓ 帮助

```
/提醒帮助
```

查看详细的使用说明

---

## 🔧 Cron 表达式说明

格式: `分 时 日 月 周`

- **分**: 0-59
- **时**: 0-23
- **日**: 1-31
- **月**: 1-12
- **周**: 0-6 (0=周日)

**特殊符号**:

- **\***: 任意值
- **\*/n**: 每n个单位
- **a,b,c**: 多个具体值（逗号分隔）
- **a-b**: 范围值

**常用示例**:

| Cron 表达式 | 说明 |
| :--- | :--- |
| `0 9 * * *` | 每天9点 |
| `0 */2 * * *` | 每2小时 |
| `30 18 * * 1-5` | 工作日18:30 |
| `0 0 1 * *` | 每月1号0点 |
| `0 9,12,18 * * *` | 每天9点、12点、18点 |
| `30 8-17/2 * * *` | 8:30到17:30之间，每2小时 |

---

## 📝 更新日志

* **v1.0**

  * 新增指令任务模块
  * 新增链接提醒功能
  * 新增查看/删除链接命令
* **v0.1**

  * 实现定时提醒功能
  * 支持使用 cron 表达式创建定时提醒
  * 支持图文混排消息，完美保持原始顺序

---

## ❤️ 支持

* [AstrBot 帮助文档](https://astrbot.app)
* 如果您在使用中遇到问题，欢迎提交 [Issue](https://github.com/Foolllll-J/astrbot_plugin_reminder/issues)。

## 🙏 致谢

* 指令执行部分参考了 [astrbot_plugin_sy](https://github.com/kjqwer/astrbot_plugin_sy) 的代码实现，在此表示感谢！

